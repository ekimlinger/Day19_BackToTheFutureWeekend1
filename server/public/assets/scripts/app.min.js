/*! back_to_the_future 2016-03-18 */
function submitEmployee(a){a.preventDefault();var b={};$.each($("#employeeForm").serializeArray(),function(a,c){b[c.name]=c.value}),$.ajax({type:"POST",url:"/employee",data:b,success:function(a){justSubmitted(a[0].name),getAllEmployees()}}),$("#employeeform").find("input[type=text]").text("")}function getAllEmployees(){$.ajax({type:"GET",url:"/employee",success:function(a){displayAllEmployees(a)}})}function displayAllEmployees(a){monthTotal=0,salary=0,monthlyPay=0,employeeAmmount=0,hiddenEmployees=[],$(".employee-data").empty(),hiddenEmployees=[];for(var b=0;b<a.length;b++)a[b].active?(displayIndividualEmployee(a[b]),employeeAmmount++,totalMonthCalc(a[b])):hiddenEmployees.push(a[b]);refreshDropdown(),employeeAmmount||totalMonthCalc()}function displayIndividualEmployee(a){$(".employee-data").append('<div class="recent-submit">');var b=$(".employee-data").children().last();b.append("<h3>"+a.name+"</h2>"),b.append("<p>Employee Number: <span>"+a.number+"</span></p>"),b.append("<p>Job title: <span>"+a.job+"</span></p>"),b.append("<p>Yearly Salary: <span>$"+a.salary+"</span></p>"),b.append("<p>Monthly Pay: <span>$"+parseInt(10*a.salary/12)/10+"</span></p>"),b.append('<button class="removeEmp"> Remove '+a.name+"</button>"),b.data("id",a.id)}function reactivateEmployee(a){var b={};b.id=$(".drop-down-menu :selected").data("id"),$.ajax({type:"PUT",url:"/employee/reactivate",data:b,success:function(a){successfulReactivate(a[0].name),getAllEmployees()}})}function refreshDropdown(){$(".drop-down-menu").html("<option>SELECT</option>");for(var a=0;a<hiddenEmployees.length;a++){var b=hiddenEmployees[a].name,c=hiddenEmployees[a].id;$(".drop-down-menu").append("<option>"+b+"</option>"),$(".drop-down-menu").children().last().data("id",c)}}function totalMonthCalc(a){salary=employeeAmmount?parseInt(a.salary):0,monthlyPay=Math.round(salary/12),monthTotal+=parseInt(monthlyPay),$(".running-total").text("Monthly pay for employees entered: $"+monthTotal)}function justSubmitted(a){$(".just-submitted").text("Added: "+a)}function deactivateEmployee(a){var b={};a.preventDefault(),b.id=$(this).parent().data("id"),$.ajax({type:"PUT",url:"/employee/deactivate",data:b,success:function(a){getAllEmployees(),successfulDelete(a[0].name)}})}function successfulDelete(a){$(".just-submitted").text("You have deleted: "+a)}function successfulReactivate(a){$(".just-submitted").text("You have reactivated: "+a)}var employeeAmmount=0,hiddenEmployees=[],monthTotal=0,salary=0,monthlyPay=0;$(document).ready(function(){$("#employeeForm").on("submit",submitEmployee),$(".employee-data").on("click",".removeEmp",deactivateEmployee),$(".drop-down-submit").on("click",reactivateEmployee),getAllEmployees()});